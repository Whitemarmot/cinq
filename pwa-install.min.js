!function(){"use strict";const n=2e3,e=15e3,t=6048e5,a="cinq-pwa-dismiss-v2",i="cinq-pwa-prompt-count",s=3;let o=null,r=null,p=null,l=!1;const d=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,c=(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&/Safari/.test(navigator.userAgent)&&!/CriOS|FxiOS|OPiOS|EdgiOS/.test(navigator.userAgent);function b(){localStorage.setItem(a,Date.now().toString());const n=parseInt(localStorage.getItem(i)||"0",10);localStorage.setItem(i,(n+1).toString())}function g(){if(function(){if(document.getElementById("pwa-install-styles-v2"))return;const n=document.createElement("style");n.id="pwa-install-styles-v2",n.textContent="\n      /* ===== PWA Install Modal ===== */\n      .pwa-install-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgba(0, 0, 0, 0.6);\n        backdrop-filter: blur(8px);\n        -webkit-backdrop-filter: blur(8px);\n        z-index: 10000;\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.3s ease;\n      }\n      \n      .pwa-install-overlay.visible {\n        opacity: 1;\n        visibility: visible;\n      }\n      \n      .pwa-install-modal {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        max-width: 420px;\n        margin: 0 auto;\n        background: linear-gradient(135deg, rgba(26, 26, 46, 0.98) 0%, rgba(22, 33, 62, 0.98) 100%);\n        border: 1px solid rgba(99, 102, 241, 0.2);\n        border-bottom: none;\n        border-radius: 24px 24px 0 0;\n        padding: 24px 24px 32px;\n        z-index: 10001;\n        transform: translateY(100%);\n        transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1);\n        box-shadow: 0 -8px 40px rgba(0, 0, 0, 0.5);\n        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n      }\n      \n      .pwa-install-overlay.visible .pwa-install-modal {\n        transform: translateY(0);\n      }\n      \n      /* Handle bar */\n      .pwa-modal-handle {\n        width: 40px;\n        height: 4px;\n        background: rgba(255, 255, 255, 0.2);\n        border-radius: 2px;\n        margin: 0 auto 20px;\n      }\n      \n      /* Header */\n      .pwa-modal-header {\n        display: flex;\n        align-items: center;\n        gap: 16px;\n        margin-bottom: 20px;\n      }\n      \n      .pwa-app-icon {\n        width: 64px;\n        height: 64px;\n        border-radius: 16px;\n        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 32px;\n        font-weight: 800;\n        color: white;\n        box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);\n        flex-shrink: 0;\n      }\n      \n      .pwa-app-info h2 {\n        font-size: 20px;\n        font-weight: 700;\n        color: white;\n        margin: 0 0 4px 0;\n      }\n      \n      .pwa-app-info p {\n        font-size: 14px;\n        color: rgba(255, 255, 255, 0.6);\n        margin: 0;\n      }\n      \n      /* Benefits */\n      .pwa-benefits {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        margin-bottom: 24px;\n        padding: 16px;\n        background: rgba(255, 255, 255, 0.03);\n        border-radius: 16px;\n        border: 1px solid rgba(255, 255, 255, 0.05);\n      }\n      \n      .pwa-benefit {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        color: rgba(255, 255, 255, 0.9);\n        font-size: 14px;\n      }\n      \n      .pwa-benefit-icon {\n        width: 36px;\n        height: 36px;\n        background: rgba(99, 102, 241, 0.15);\n        border-radius: 10px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 18px;\n        flex-shrink: 0;\n      }\n      \n      .pwa-benefit-text strong {\n        color: white;\n        display: block;\n        margin-bottom: 2px;\n      }\n      \n      .pwa-benefit-text span {\n        color: rgba(255, 255, 255, 0.5);\n        font-size: 12px;\n      }\n      \n      /* Actions */\n      .pwa-modal-actions {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n      }\n      \n      .pwa-btn {\n        width: 100%;\n        padding: 16px 24px;\n        border-radius: 14px;\n        font-size: 16px;\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        border: none;\n        font-family: inherit;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n      }\n      \n      .pwa-btn-primary {\n        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n        color: white;\n        box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);\n      }\n      \n      .pwa-btn-primary:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);\n      }\n      \n      .pwa-btn-primary:active {\n        transform: translateY(0);\n      }\n      \n      .pwa-btn-secondary {\n        background: transparent;\n        color: rgba(255, 255, 255, 0.6);\n        padding: 12px;\n      }\n      \n      .pwa-btn-secondary:hover {\n        color: rgba(255, 255, 255, 0.8);\n      }\n      \n      /* ===== iOS Instructions ===== */\n      .pwa-ios-modal {\n        text-align: center;\n      }\n      \n      .pwa-ios-illustration {\n        margin: 0 auto 24px;\n        width: 200px;\n        height: 120px;\n        background: rgba(255, 255, 255, 0.03);\n        border-radius: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        overflow: hidden;\n      }\n      \n      .pwa-ios-phone {\n        width: 80px;\n        height: 100px;\n        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n        border: 2px solid rgba(255, 255, 255, 0.2);\n        border-radius: 12px;\n        position: relative;\n      }\n      \n      .pwa-ios-share-icon {\n        position: absolute;\n        bottom: -10px;\n        left: 50%;\n        transform: translateX(-50%);\n        font-size: 28px;\n        animation: bounceUp 1.5s ease-in-out infinite;\n      }\n      \n      @keyframes bounceUp {\n        0%, 100% { transform: translateX(-50%) translateY(0); }\n        50% { transform: translateX(-50%) translateY(-8px); }\n      }\n      \n      .pwa-ios-steps {\n        text-align: left;\n        margin-bottom: 24px;\n      }\n      \n      .pwa-ios-step {\n        display: flex;\n        align-items: flex-start;\n        gap: 16px;\n        padding: 16px 0;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n      }\n      \n      .pwa-ios-step:last-child {\n        border-bottom: none;\n      }\n      \n      .pwa-ios-step-num {\n        width: 32px;\n        height: 32px;\n        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 14px;\n        font-weight: 700;\n        color: white;\n        flex-shrink: 0;\n      }\n      \n      .pwa-ios-step-content {\n        flex: 1;\n        padding-top: 4px;\n      }\n      \n      .pwa-ios-step-content strong {\n        color: white;\n        font-size: 15px;\n        display: block;\n        margin-bottom: 4px;\n      }\n      \n      .pwa-ios-step-content span {\n        color: rgba(255, 255, 255, 0.5);\n        font-size: 13px;\n      }\n      \n      .pwa-ios-step-icon {\n        font-size: 20px;\n        margin-left: auto;\n        align-self: center;\n      }\n      \n      /* ===== Compact Banner (alternative) ===== */\n      .pwa-banner-compact {\n        position: fixed;\n        bottom: 20px;\n        left: 16px;\n        right: 16px;\n        max-width: 400px;\n        margin: 0 auto;\n        background: linear-gradient(135deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);\n        border: 1px solid rgba(99, 102, 241, 0.3);\n        border-radius: 16px;\n        padding: 16px;\n        z-index: 9999;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n        backdrop-filter: blur(12px);\n        -webkit-backdrop-filter: blur(12px);\n        transform: translateY(120%);\n        transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1);\n      }\n      \n      .pwa-banner-compact.visible {\n        transform: translateY(0);\n      }\n      \n      .pwa-banner-icon {\n        width: 48px;\n        height: 48px;\n        border-radius: 12px;\n        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n        font-weight: 800;\n        color: white;\n        flex-shrink: 0;\n      }\n      \n      .pwa-banner-content {\n        flex: 1;\n        min-width: 0;\n      }\n      \n      .pwa-banner-title {\n        font-size: 15px;\n        font-weight: 600;\n        color: white;\n        margin: 0 0 2px 0;\n      }\n      \n      .pwa-banner-subtitle {\n        font-size: 13px;\n        color: rgba(255, 255, 255, 0.6);\n        margin: 0;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      \n      .pwa-banner-actions {\n        display: flex;\n        gap: 8px;\n        flex-shrink: 0;\n      }\n      \n      .pwa-banner-btn {\n        padding: 10px 16px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        border: none;\n        font-family: inherit;\n      }\n      \n      .pwa-banner-btn-primary {\n        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n        color: white;\n      }\n      \n      .pwa-banner-btn-dismiss {\n        background: transparent;\n        color: rgba(255, 255, 255, 0.4);\n        padding: 10px;\n        font-size: 18px;\n      }\n      \n      /* ===== Success Animation ===== */\n      .pwa-success-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 10002;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.3s ease;\n      }\n      \n      .pwa-success-overlay.visible {\n        opacity: 1;\n        visibility: visible;\n      }\n      \n      .pwa-success-content {\n        text-align: center;\n        color: white;\n      }\n      \n      .pwa-success-icon {\n        font-size: 80px;\n        animation: successPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n      }\n      \n      .pwa-success-text {\n        font-size: 24px;\n        font-weight: 700;\n        margin-top: 16px;\n      }\n      \n      @keyframes successPop {\n        0% { transform: scale(0); }\n        50% { transform: scale(1.2); }\n        100% { transform: scale(1); }\n      }\n      \n      /* ===== Responsive ===== */\n      @media (max-width: 380px) {\n        .pwa-install-modal {\n          padding: 20px 16px 28px;\n        }\n        .pwa-app-icon {\n          width: 52px;\n          height: 52px;\n          font-size: 26px;\n        }\n        .pwa-app-info h2 {\n          font-size: 18px;\n        }\n        .pwa-benefit {\n          font-size: 13px;\n        }\n        .pwa-benefit-icon {\n          width: 32px;\n          height: 32px;\n          font-size: 16px;\n        }\n      }\n    ",document.head.appendChild(n)}(),r)return;r=c?function(){const n=document.createElement("div");return n.className="pwa-install-overlay",n.id="pwa-install-overlay",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-labelledby","pwa-ios-title"),n.innerHTML='\n      <div class="pwa-install-modal pwa-ios-modal">\n        <div class="pwa-modal-handle"></div>\n        \n        <div class="pwa-modal-header" style="justify-content: center;">\n          <div class="pwa-app-icon">5</div>\n          <div class="pwa-app-info">\n            <h2 id="pwa-ios-title">Installer Cinq</h2>\n            <p>Ajoute l\'app Ã  ton Ã©cran d\'accueil</p>\n          </div>\n        </div>\n        \n        <div class="pwa-ios-illustration">\n          <div class="pwa-ios-phone"></div>\n          <span class="pwa-ios-share-icon">ðŸ“¤</span>\n        </div>\n        \n        <div class="pwa-ios-steps">\n          <div class="pwa-ios-step">\n            <span class="pwa-ios-step-num">1</span>\n            <div class="pwa-ios-step-content">\n              <strong>Appuie sur Partager</strong>\n              <span>Le bouton en bas de Safari</span>\n            </div>\n            <span class="pwa-ios-step-icon">ðŸ“¤</span>\n          </div>\n          <div class="pwa-ios-step">\n            <span class="pwa-ios-step-num">2</span>\n            <div class="pwa-ios-step-content">\n              <strong>Sur l\'Ã©cran d\'accueil</strong>\n              <span>Fais dÃ©filer et trouve cette option</span>\n            </div>\n            <span class="pwa-ios-step-icon">âž•</span>\n          </div>\n          <div class="pwa-ios-step">\n            <span class="pwa-ios-step-num">3</span>\n            <div class="pwa-ios-step-content">\n              <strong>Appuie sur Ajouter</strong>\n              <span>Et voilÃ , Cinq est installÃ© !</span>\n            </div>\n            <span class="pwa-ios-step-icon">âœ…</span>\n          </div>\n        </div>\n        \n        <div class="pwa-modal-actions">\n          <button class="pwa-btn pwa-btn-primary" id="pwa-ios-ok-btn">\n            J\'ai compris\n          </button>\n        </div>\n      </div>\n    ',n}():function(){const n=document.createElement("div");return n.className="pwa-install-overlay",n.id="pwa-install-overlay",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-labelledby","pwa-modal-title"),n.innerHTML='\n      <div class="pwa-install-modal">\n        <div class="pwa-modal-handle"></div>\n        \n        <div class="pwa-modal-header">\n          <div class="pwa-app-icon">5</div>\n          <div class="pwa-app-info">\n            <h2 id="pwa-modal-title">Installer Cinq</h2>\n            <p>L\'anti-rÃ©seau social</p>\n          </div>\n        </div>\n        \n        <div class="pwa-benefits">\n          <div class="pwa-benefit">\n            <span class="pwa-benefit-icon">âš¡</span>\n            <div class="pwa-benefit-text">\n              <strong>AccÃ¨s instantanÃ©</strong>\n              <span>Depuis ton Ã©cran d\'accueil</span>\n            </div>\n          </div>\n          <div class="pwa-benefit">\n            <span class="pwa-benefit-icon">ðŸ””</span>\n            <div class="pwa-benefit-text">\n              <strong>Notifications</strong>\n              <span>Sois alertÃ© quand tes proches t\'Ã©crivent</span>\n            </div>\n          </div>\n          <div class="pwa-benefit">\n            <span class="pwa-benefit-icon">ðŸ“´</span>\n            <div class="pwa-benefit-text">\n              <strong>Fonctionne hors ligne</strong>\n              <span>Tes messages sont envoyÃ©s dÃ¨s que tu es connectÃ©</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="pwa-modal-actions">\n          <button class="pwa-btn pwa-btn-primary" id="pwa-install-btn">\n            <span>ðŸ“²</span> Installer l\'application\n          </button>\n          <button class="pwa-btn pwa-btn-secondary" id="pwa-dismiss-btn">\n            Plus tard\n          </button>\n        </div>\n      </div>\n    ',n}(),document.body.appendChild(r);const n=r.querySelector("button");n?.focus(),requestAnimationFrame(()=>{r.classList.add("visible")}),c?document.getElementById("pwa-ios-ok-btn")?.addEventListener("click",()=>{b(),w()}):(document.getElementById("pwa-install-btn")?.addEventListener("click",f),document.getElementById("pwa-dismiss-btn")?.addEventListener("click",()=>{b(),w()})),r.addEventListener("click",n=>{n.target===r&&(b(),w())}),document.addEventListener("keydown",u)}function w(){r&&(r.classList.remove("visible"),document.removeEventListener("keydown",u),setTimeout(()=>{r?.remove(),r=null},400))}function u(n){"Escape"===n.key&&(b(),w())}async function f(){if(o)try{o.prompt();const{outcome:n}=await o.userChoice;console.log("[PWA] Install outcome:",n),"accepted"===n&&x(),o=null,w()}catch(n){console.error("[PWA] Install error:",n)}}function x(){const n=function(){const n=document.createElement("div");return n.className="pwa-success-overlay",n.id="pwa-success-overlay",n.innerHTML='\n      <div class="pwa-success-content">\n        <div class="pwa-success-icon">ðŸŽ‰</div>\n        <div class="pwa-success-text">C\'est installÃ© !</div>\n      </div>\n    ',n}();document.body.appendChild(n),requestAnimationFrame(()=>{n.classList.add("visible")}),setTimeout(()=>{n.classList.remove("visible"),setTimeout(()=>n.remove(),300)},2e3)}function m(){p||(p=setTimeout(()=>{l=!0,o&&g()},e),["click","scroll","keydown","touchstart"].forEach(n=>{document.addEventListener(n,v,{once:!0,passive:!0})}))}function v(){p&&(clearTimeout(p),p=null),m()}function h(){if(d)console.log("[PWA] Already installed as standalone");else if(function(){const n=localStorage.getItem(a);return!!n&&Date.now()-parseInt(n,10)<t}()||parseInt(localStorage.getItem(i)||"0",10)>=s)console.log("[PWA] Prompt skipped (dismissed or exceeded)");else{if(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),o=e,console.log("[PWA] beforeinstallprompt received"),l&&setTimeout(g,n)}),m(),c){const e=setInterval(()=>{l&&(clearInterval(e),setTimeout(g,n))},1e3)}window.addEventListener("appinstalled",()=>{console.log("[PWA] App installed successfully"),o=null,w(),x(),"function"==typeof gtag&&gtag("event","pwa_install",{event_category:"engagement",event_label:"success"})})}}window.CinqPWA={show:g,hide:w,isInstallable:()=>!!o||c,isInstalled:()=>d},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()}();