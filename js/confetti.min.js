const CinqConfetti=function(){"use strict";const t={respectReducedMotion:!0,defaults:{spread:70,startVelocity:30,decay:.94,scalar:1,ticks:200,origin:{y:.6}},colors:{brand:["#ff6b4a","#ff8a6a","#6366f1","#8b5cf6","#a855f7"],birthday:["#fbbf24","#fb923c","#f87171","#a78bfa","#22c55e","#60a5fa"],gold:["#fbbf24","#f59e0b","#d97706","#fcd34d","#fef3c7"],rainbow:["#ff6b6b","#feca57","#48dbfb","#ff9ff3","#54a0ff","#5f27cd"]}};let o=!1,n=null,e=null;function r(){return!!t.respectReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}async function a(){return o&&n?n:e||(e=new Promise((t,e)=>{if(window.confetti)return n=window.confetti,o=!0,void t(n);const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js",r.async=!0,r.onload=()=>{n=window.confetti,o=!0,t(n)},r.onerror=()=>{console.warn("[CinqConfetti] Failed to load confetti library"),e(new Error("Failed to load confetti"))},document.head.appendChild(r)}),e)}function i(t,o){return Math.random()*(o-t)+t}async function c(o={}){if(!r())try{(await a())({...t.defaults,particleCount:o.particleCount||100,spread:o.spread||70,colors:o.colors||t.colors.brand,origin:o.origin||{x:.5,y:.6},...o})}catch(t){console.warn("[CinqConfetti] Burst failed:",t)}}async function s(){if(!r())try{const o=await a(),n=150,e={origin:{y:.7},colors:t.colors.brand};o({...e,particleCount:Math.floor(n/2),angle:60,spread:55,origin:{x:0}}),o({...e,particleCount:Math.floor(n/2),angle:120,spread:55,origin:{x:1}}),setTimeout(()=>{o({particleCount:80,spread:100,origin:{y:.6,x:.5},colors:t.colors.brand,startVelocity:45})},200)}catch(t){console.warn("[CinqConfetti] First post celebration failed:",t)}}async function l(){if(!r())try{const o=await a(),n=3e3,e=Date.now()+n,r=t.colors.gold,i=()=>{o({particleCount:3,angle:60,spread:55,origin:{x:0},colors:r}),o({particleCount:3,angle:120,spread:55,origin:{x:1},colors:r}),Date.now()<e&&requestAnimationFrame(i)};i(),o({particleCount:200,spread:160,origin:{y:.5,x:.5},colors:t.colors.rainbow,startVelocity:50,gravity:.8,scalar:1.2}),setTimeout(()=>{o({particleCount:50,spread:360,origin:{y:.5,x:.5},colors:t.colors.gold,shapes:["star"],scalar:1.5,ticks:300})},500)}catch(t){console.warn("[CinqConfetti] Fifth contact celebration failed:",t)}}async function f(o=""){if(!r())try{const o=await a(),n=4e3,e=Date.now()+n,r=t.colors.birthday,c=()=>{const t=e-Date.now();o({particleCount:2,angle:i(55,125),spread:i(50,70),origin:{x:Math.random()},colors:r,gravity:.6,drift:i(-1,1),scalar:i(.8,1.2)}),t>0&&requestAnimationFrame(c)};c(),o({particleCount:100,spread:70,origin:{y:.9,x:.5},colors:r,startVelocity:50,gravity:1.2}),setTimeout(()=>{o({particleCount:50,angle:60,spread:50,origin:{x:0,y:.8},colors:r}),o({particleCount:50,angle:120,spread:50,origin:{x:1,y:.8},colors:r})},1e3)}catch(t){console.warn("[CinqConfetti] Birthday celebration failed:",t)}}const d="cinq_celebrations";function u(){try{return JSON.parse(localStorage.getItem(d))||{}}catch{return{}}}function p(t,o=!0){try{const n=u();n[t]=o,localStorage.setItem(d,JSON.stringify(n))}catch(t){}}function y(t){return!0===u()[t]}return{preload:async function(){try{await a(),console.log("[CinqConfetti] Library preloaded")}catch(t){}},burst:c,celebrate:async function(t={}){if(r())return;switch(t.type||"standard"){case"firstPost":return s();case"fifthContact":return l();case"birthday":return f(t.name);default:return c(t)}},firstPost:s,fifthContact:l,birthday:f,schoolPride:async function(){if(!r())try{const o=await a(),n=Date.now()+3e3,e=t.colors.brand,r=()=>{o({particleCount:2,angle:60,spread:55,origin:{x:0},colors:e}),o({particleCount:2,angle:120,spread:55,origin:{x:1},colors:e}),Date.now()<n&&requestAnimationFrame(r)};r()}catch(t){console.warn("[CinqConfetti] School pride failed:",t)}},triggerFirstPostIfNeeded:async function(){return!y("firstPost")&&(p("firstPost"),await s(),!0)},triggerFifthContactIfNeeded:async function(){return!y("fifthContact")&&(p("fifthContact"),await l(),!0)},hasCelebrated:y,setCelebration:p,prefersReducedMotion:r}}();window.CinqConfetti=CinqConfetti,"undefined"!=typeof module&&module.exports&&(module.exports=CinqConfetti);