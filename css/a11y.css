/**
 * Cinq — Accessibility Styles
 * WCAG 2.1 AA Compliance
 * 
 * @version 1.0
 * @license Proprietary
 */

/* ==========================================================================
   SKIP LINKS - Navigation rapide pour lecteurs d'écran
   ========================================================================== */

.skip-link {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  padding: var(--space-3, 0.75rem) var(--space-6, 1.5rem);
  background: var(--color-brand, #6366f1);
  color: white;
  font-weight: 600;
  text-decoration: none;
  border-radius: 0 0 var(--radius-lg, 0.75rem) var(--radius-lg, 0.75rem);
  transition: top 0.2s ease-out;
}

.skip-link:focus {
  top: 0;
  outline: 2px solid white;
  outline-offset: 2px;
}

/* ==========================================================================
   FOCUS STYLES - Enhanced focus indicators
   ========================================================================== */

/* Global focus-visible styles */
:focus-visible {
  outline: 2px solid var(--color-brand, #6366f1);
  outline-offset: 2px;
  border-radius: var(--radius-sm, 0.375rem);
}

/* Remove default outline for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Enhanced focus for buttons */
.btn:focus-visible,
button:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--color-brand, #6366f1);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--color-brand-muted, rgba(99, 102, 241, 0.25));
}

/* Enhanced focus for inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
.input:focus-visible {
  outline: none;
  border-color: var(--color-brand, #6366f1);
  box-shadow: 0 0 0 3px var(--color-brand-muted, rgba(99, 102, 241, 0.25));
}

/* Enhanced focus for links */
a:focus-visible {
  outline: 2px solid var(--color-brand, #6366f1);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Focus for card-like elements */
.contact-slot:focus-visible,
.action-btn:focus-visible,
.card:focus-visible {
  outline: 2px solid var(--color-brand, #6366f1);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--color-brand-muted, rgba(99, 102, 241, 0.25));
}

/* Focus for modal close buttons */
.chat-close:focus-visible,
.modal-close:focus-visible {
  outline: 2px solid var(--color-brand, #6366f1);
  outline-offset: 2px;
  border-radius: 50%;
}

/* ==========================================================================
   COLOR CONTRAST IMPROVEMENTS - WCAG AA Compliance
   ========================================================================== */

/* Improve muted text contrast (4.5:1 minimum for AA) */
/* Original: rgba(255, 255, 255, 0.55) = ~4.2:1 on #0a0a0b */
/* Improved: rgba(255, 255, 255, 0.7) = ~5.5:1 on #0a0a0b */

:root {
  /* Improved text colors for better contrast */
  --color-text-muted-a11y: rgba(255, 255, 255, 0.7);
  --color-text-secondary-a11y: rgba(255, 255, 255, 0.85);
}

/* Apply improved contrast to muted text */
.text-muted,
.waitlist-label,
.cta-note,
.counter-label,
.quote-text,
.footer-quote .quote-text,
.contact-name,
.action-subtitle,
.toast-message,
.onboarding-text,
.login-subtitle,
.gift-subtitle,
.form-label,
.home-link {
  color: var(--color-text-muted-a11y, rgba(255, 255, 255, 0.7)) !important;
}

/* Footer links need better contrast */
footer a,
.footer a {
  color: rgba(255, 255, 255, 0.7) !important;
}

footer a:hover,
.footer a:hover {
  color: var(--color-brand-hover, #818cf8) !important;
}

/* Placeholder text contrast */
::placeholder {
  color: rgba(255, 255, 255, 0.6);
  opacity: 1;
}

/* Error/Success text - ensure good contrast */
.message.error,
.error {
  color: #f87171 !important; /* Lighter red for better contrast */
}

.message.success,
.success {
  color: #4ade80 !important; /* Lighter green for better contrast */
}

/* ==========================================================================
   KEYBOARD NAVIGATION IMPROVEMENTS
   ========================================================================== */

/* Make all interactive elements keyboard accessible */
.contact-slot,
.action-btn,
.feature-pill,
.ping-btn,
.onboarding-skip {
  cursor: pointer;
}

/* Tab focus order helpers */
[tabindex="-1"]:focus {
  outline: none;
}

/* Skip hidden elements from tab order */
[aria-hidden="true"] {
  pointer-events: none;
}

/* Ensure clickable cards are focusable */
.card-interactive,
.contact-slot.filled,
.contact-slot.empty {
  position: relative;
}

/* ==========================================================================
   SCREEN READER ENHANCEMENTS
   ========================================================================== */

/* Visually hidden but accessible */
.sr-only,
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Show on focus for skip links */
.sr-only-focusable:focus,
.visually-hidden-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Live regions */
[role="status"],
[role="alert"],
[aria-live] {
  /* Ensure live regions are announced */
}

/* ==========================================================================
   TOUCH TARGET SIZE - Minimum 44x44px
   ========================================================================== */

/* Ensure minimum touch target size */
button,
a,
[role="button"],
input[type="submit"],
input[type="button"],
.btn {
  min-height: 44px;
  min-width: 44px;
}

/* Exception for inline links */
p a,
.text a {
  min-height: auto;
  min-width: auto;
}

/* Small buttons need padding to meet touch target */
.btn-sm {
  min-height: 44px;
  padding: var(--space-2, 0.5rem) var(--space-4, 1rem);
}

/* Icon buttons */
.btn-icon,
.ping-btn,
.chat-close,
.logout-btn {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ==========================================================================
   HIGH CONTRAST MODE SUPPORT
   ========================================================================== */

@media (prefers-contrast: high) {
  :root {
    --color-text-muted: rgba(255, 255, 255, 0.9);
    --color-text-secondary: rgba(255, 255, 255, 0.95);
    --color-border: rgba(255, 255, 255, 0.3);
    --color-border-active: rgba(255, 255, 255, 0.5);
  }
  
  .btn,
  button {
    border: 2px solid currentColor;
  }
  
  .card,
  .contact-slot,
  .action-btn {
    border-width: 2px;
  }
}

/* ==========================================================================
   REDUCED MOTION
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .animate-fade-in-up,
  .animate-slide-left,
  .animate-slide-right,
  .animate-scale-in,
  .animate-hero-logo,
  .animate-ring {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
  
  .gradient-orb {
    animation: none !important;
  }
}

/* ==========================================================================
   FORM ACCESSIBILITY
   ========================================================================== */

/* Error states */
.input-error,
input[aria-invalid="true"],
textarea[aria-invalid="true"] {
  border-color: var(--color-error, #ef4444);
}

.input-error:focus,
input[aria-invalid="true"]:focus,
textarea[aria-invalid="true"]:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.25);
}

/* Required field indicator */
.required::after {
  content: " *";
  color: var(--color-error, #ef4444);
}

/* Form error messages */
.field-error {
  color: #f87171;
  font-size: var(--text-sm, 0.875rem);
  margin-top: var(--space-1, 0.25rem);
}

/* ==========================================================================
   LOADING STATES ACCESSIBILITY
   ========================================================================== */

/* Announce loading state to screen readers */
[aria-busy="true"] {
  cursor: wait;
}

.loading-spinner {
  /* Ensure spinner has accessible label via aria-label */
}

/* ==========================================================================
   MODAL ACCESSIBILITY
   ========================================================================== */

/* Trap focus within modal when open */
.modal-overlay.open,
.chat-panel.open {
  /* Focus trap handled by JS */
}

/* Modal backdrop */
.modal-overlay {
  /* Clicking backdrop should close modal - handled by JS */
}

/* Ensure modal content is scrollable with keyboard */
.modal,
.chat-messages {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* ==========================================================================
   LINK ACCESSIBILITY
   ========================================================================== */

/* Ensure links are distinguishable from text */
a:not(.btn):not(.cta-button):not(.action-btn) {
  text-decoration: underline;
  text-underline-offset: 2px;
}

a:not(.btn):not(.cta-button):not(.action-btn):hover {
  text-decoration-thickness: 2px;
}

/* Footer links exception - already have visual distinction */
footer a {
  text-decoration: none;
}

footer a:hover {
  text-decoration: underline;
}
